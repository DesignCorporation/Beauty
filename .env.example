# ================================================================
# üè¢ BEAUTY PLATFORM - Environment Configuration Template
# ================================================================
#
# This is a template file for environment variables.
# Copy this file to .env and fill in your actual values.
#
# üìù Instructions:
#   1. Copy: cp .env.example .env
#   2. Fill in all REQUIRED variables (marked with ‚ö†Ô∏è)
#   3. Adjust OPTIONAL variables as needed
#   4. Keep .env file SECRET - never commit to git!
#
# üîí Security Note:
#   - All SECRET values below are examples only
#   - Generate strong random values for production
#   - Use different secrets for dev/staging/production
# ================================================================


# ================================================================
# üóÑÔ∏è  DATABASE CONFIGURATION
# ================================================================
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
# ‚ö†Ô∏è  REQUIRED
DATABASE_URL="postgresql://beauty_platform_user:YOUR_SECURE_PASSWORD@localhost:6100/beauty_platform_new"

# Optional: component variables (used by docker-compose.production.yml)
# ‚ö†Ô∏è REQUIRED for production if you run docker-compose directly
DATABASE_NAME="beauty_platform_new"
DATABASE_USER="beauty_platform_user"
DATABASE_PASSWORD="YOUR_SECURE_PASSWORD"


# ================================================================
# üîê AUTHENTICATION & SECURITY
# ================================================================

# JWT Token Configuration
# ‚ö†Ô∏è  REQUIRED - Generate strong random secrets (min 32 characters)
# Tip: Use `openssl rand -hex 32` to generate secure secrets
JWT_SECRET="your-secret-jwt-key-min-32-characters-random-string"
JWT_REFRESH_SECRET="your-refresh-secret-different-from-access-min-32-chars"

# JWT Token Expiration Times
# Format: Use time units: s (seconds), m (minutes), h (hours), d (days)
# Development: Longer TTL for convenience
# Production: Shorter TTL for security
ACCESS_TOKEN_TTL="15m"          # Recommended: 15m for production, 12h for dev
REFRESH_TOKEN_TTL="7d"          # Recommended: 7d

# Multi-Factor Authentication (MFA)
# ‚ö†Ô∏è  REQUIRED - 64 character hex string
# Generate: `openssl rand -hex 32`
MFA_MASTER_KEY="your-64-character-hex-string-for-mfa-encryption-key-here-replace-this"


# ================================================================
# üåê SERVICE URLS (Backend Microservices)
# ================================================================
# Internal service communication URLs
# Development: Use localhost with assigned ports
# Production: Use internal Docker network or service mesh

API_GATEWAY_URL="http://localhost:6020"     # Main API Gateway entry point
AUTH_SERVICE_URL="http://localhost:6021"    # Authentication service
CRM_API_URL="http://localhost:6022"         # CRM business logic API
MCP_SERVER_URL="http://localhost:6025"      # AI Memory & Context server
IMAGES_API_URL="http://localhost:6026"      # Image upload & optimization
BACKUP_SERVICE_URL="http://localhost:6027"  # Backup service
NOTIFY_SERVICE_URL="http://localhost:6028"  # Notification service
PAYMENT_SERVICE_URL="http://localhost:6029" # Payment processing


# ================================================================
# üé® FRONTEND URLS
# ================================================================
# Frontend application URLs
# Development: Use localhost with assigned ports
# Production: Use actual domain names

LANDING_URL="http://localhost:6004"         # Marketing landing page (port 6000 or 6004)
CRM_URL="http://localhost:6001"             # Salon CRM application
ADMIN_URL="http://localhost:6002"           # Admin panel
CLIENT_URL="http://localhost:6003"          # Client booking portal


# ================================================================
# üîÑ CORS CONFIGURATION
# ================================================================
# Comma-separated list of allowed origins for CORS
# ‚ö†Ô∏è  REQUIRED - Must match your frontend URLs
# Production: Use actual domain names (https://salon.beauty.designcorp.eu)
CORS_ORIGINS="http://localhost:6004,http://localhost:6001,http://localhost:6002,http://localhost:6003"


# ================================================================
# üõ†Ô∏è  ENVIRONMENT SETTINGS
# ================================================================
# Application environment mode
# Options: development | staging | production
NODE_ENV="development"

# Enable distributed tracing (APM tools like OpenTelemetry)
# Options: true | false
ENABLE_TRACING="false"


# ================================================================
# üìß TELEGRAM NOTIFICATIONS (Optional)
# ================================================================
# Used for system alerts and monitoring notifications
# Optional - Disable if not using Telegram integration

TELEGRAM_ENABLED="false"                    # Enable/disable Telegram notifications
TELEGRAM_BOT_TOKEN="1234567890:ABCdefGHIjklMNOpqrsTUVwxyz1234567890"  # Bot token from @BotFather
TELEGRAM_CHAT_ID="123456789"                # Your Telegram chat ID (get from @userinfobot)


# ================================================================
# üì® EMAIL CONFIGURATION (SMTP)
# ================================================================
# Email service for transactional emails (booking confirmations, receipts, etc.)
# ‚ö†Ô∏è  REQUIRED for production
# Supported providers: Gmail, SendGrid, AWS SES, Mailgun, etc.

# Gmail SMTP Configuration (example)
SMTP_HOST="smtp.gmail.com"                  # SMTP server hostname
SMTP_PORT="587"                             # Port (587 for TLS, 465 for SSL)
SMTP_SECURE="false"                         # Use SSL/TLS (false for STARTTLS)
SMTP_USER="your-email@gmail.com"            # SMTP username (email)
SMTP_PASS="your-gmail-app-password"         # App Password (not regular password!)
EMAIL_FROM="Beauty Platform <noreply@yourdomain.com>"  # Sender name and email

# üìù Gmail Setup Instructions:
#   1. Enable 2-Factor Authentication in Google Account
#   2. Generate App Password: https://myaccount.google.com/apppasswords
#   3. Use App Password (16 chars without spaces) in SMTP_PASS
#
# ‚ö†Ô∏è FOR PRODUCTION: Set SMTP_PASS via GitHub Secrets, not in .env file!


# ================================================================
# üîë GOOGLE OAUTH (Client Portal Authentication)
# ================================================================
# Google OAuth 2.0 for "Sign in with Google" feature
# ‚ö†Ô∏è  REQUIRED for Client Portal OAuth
# Get credentials: https://console.cloud.google.com/apis/credentials
#
# ‚ö†Ô∏è FOR PRODUCTION: Set GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET via GitHub Secrets!
#    Set them using: gh secret set GOOGLE_CLIENT_ID -b "your_client_id"
#                   gh secret set GOOGLE_CLIENT_SECRET -b "your_client_secret"

GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
GOOGLE_CALLBACK_URL="https://api.yourdomain.com/api/auth/google/callback"          # Client OAuth callback
GOOGLE_OWNER_CALLBACK_URL="https://api.yourdomain.com/api/auth/google-owner/callback"  # Owner OAuth callback
COOKIE_DOMAIN=".localhost"                         # Dev: .localhost | Prod: .beauty.designcorp.eu
FRONTEND_BASE_URL="http://localhost:6001"          # CRM base URL for building reset links

# üìù Google OAuth Setup:
#   1. Create project in Google Cloud Console
#   2. Enable Google+ API
#   3. Create OAuth 2.0 credentials
#   4. Add authorized redirect URIs (callback URLs)
#   5. Copy Client ID and Client Secret


# ================================================================
# üì± SMS VERIFICATION (Twilio - Primary Provider)
# ================================================================
# SMS OTP verification for phone number confirmation
# ‚ö†Ô∏è  REQUIRED for Client Portal phone verification
# Get credentials: https://console.twilio.com
#
# ‚ö†Ô∏è FOR PRODUCTION: Set TWILIO_ACCOUNT_SID and TWILIO_AUTH_TOKEN via GitHub Secrets!
#    Set them using: gh secret set TWILIO_ACCOUNT_SID -b "your_account_sid"
#                   gh secret set TWILIO_AUTH_TOKEN -b "your_auth_token"

TWILIO_ACCOUNT_SID=${TWILIO_ACCOUNT_SID}
TWILIO_AUTH_TOKEN=${TWILIO_AUTH_TOKEN}
TWILIO_PHONE_NUMBER="+1234567890"                          # Twilio phone number (E.164 format)

# SMS Verification Settings
SMS_OTP_LENGTH="6"                          # OTP code length (digits)
SMS_OTP_EXPIRY_MINUTES="5"                  # OTP expiration time
SMS_MAX_ATTEMPTS_PER_HOUR="3"               # Rate limit (anti-spam)

# üìù Twilio Setup:
#   1. Create account at https://twilio.com
#   2. Verify your account (add credit card for production)
#   3. Get a phone number (Phone Numbers ‚Üí Buy a number)
#   4. Copy Account SID and Auth Token from Dashboard
#   5. Store credentials in GitHub Secrets (NOT in .env!)


# ================================================================
# üì± SMS BACKUP PROVIDER (MessageBird - Optional)
# ================================================================
# Backup SMS provider if Twilio fails (optional but recommended)
# Get credentials: https://dashboard.messagebird.com
#
# ‚ö†Ô∏è FOR PRODUCTION: Set MESSAGEBIRD_API_KEY via GitHub Secrets!

MESSAGEBIRD_API_KEY=${MESSAGEBIRD_API_KEY}
MESSAGEBIRD_ORIGINATOR="BeautyPlatform"                     # Sender name (11 chars max)


# ================================================================
# üí≥ PAYMENT PROCESSING (Stripe)
# ================================================================
# Stripe payment gateway for subscriptions and payments
# ‚ö†Ô∏è  REQUIRED for Payment Service
# Get credentials: https://dashboard.stripe.com/apikeys
#
# ‚ö†Ô∏è FOR PRODUCTION: Set all Stripe keys via GitHub Secrets!
#    Set them using: gh secret set STRIPE_PUBLISHABLE_KEY -b "your_publishable_key"
#                   gh secret set STRIPE_SECRET_KEY -b "your_secret_key"
#                   gh secret set STRIPE_WEBHOOK_SECRET -b "your_webhook_secret"

# Stripe API Keys
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}

# Frontend Stripe Key (Vite environment variable)
VITE_STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}

# Payment Configuration
NOTIFY_TOKEN=""                             # Optional: Auth token for notification service
INVOICE_DEFAULT_LOCALE="en"                 # Default invoice language (en, pl, ru, uk)
SUPPORTED_CURRENCIES="EUR,USD,PLN,GBP"      # Comma-separated currency codes
DEFAULT_CURRENCY="EUR"                      # Default currency (must be in SUPPORTED_CURRENCIES)

# üìù Stripe Setup:
#   1. Create account at https://stripe.com
#   2. Get API keys from Dashboard ‚Üí Developers ‚Üí API keys
#   3. Use test keys (pk_test_... / sk_test_...) for development
#   4. Setup webhook endpoint in Dashboard ‚Üí Developers ‚Üí Webhooks
#   5. Add endpoint: https://api.yourdomain.com/webhooks/stripe
#   6. Select events: payment_intent.succeeded, payment_intent.payment_failed
#   7. Copy webhook signing secret to GitHub Secrets (NOT to .env!)


# ================================================================
# üí≥ PAYPAL PAYMENT PROCESSING (Optional)
# ================================================================
# PayPal payment gateway (alternative to Stripe)
# Optional - Set via GitHub Secrets if using PayPal

PAYPAL_CLIENT_ID=${PAYPAL_CLIENT_ID}
PAYPAL_CLIENT_SECRET=${PAYPAL_CLIENT_SECRET}
PAYPAL_MODE="sandbox"                       # sandbox | production

# üìù PayPal Setup:
#   1. Create account at https://developer.paypal.com
#   2. Go to App & Credentials
#   3. Create a sandbox business account
#   4. Get Client ID and Secret
#   5. Store in GitHub Secrets (NOT in .env!)


# ================================================================
# üí∞ POLISH PAYMENT PROVIDERS (Future - Optional)
# ================================================================
# Local Polish payment methods for better conversion rates
# Uncomment and configure when ready to launch in Poland

# Przelewy24 (Popular in Poland)
# PRZELEWY24_MERCHANT_ID=${PRZELEWY24_MERCHANT_ID}
# PRZELEWY24_POS_ID=${PRZELEWY24_POS_ID}
# PRZELEWY24_CRC=${PRZELEWY24_CRC}
# PRZELEWY24_MODE="sandbox"                 # sandbox | production

# PayU (Alternative Polish provider)
# PAYU_POS_ID=${PAYU_POS_ID}
# PAYU_CLIENT_SECRET=${PAYU_CLIENT_SECRET}
# PAYU_MODE="sandbox"                       # sandbox | production


# ================================================================
# üñºÔ∏è  IMAGE UPLOAD & STORAGE
# ================================================================
# Image processing and storage configuration

UPLOAD_DIR="./uploads"                      # Local storage directory
MAX_FILE_SIZE="10485760"                    # Max file size in bytes (10MB = 10485760)
ALLOWED_IMAGE_TYPES="image/jpeg,image/png,image/webp"  # Allowed MIME types


# ================================================================
# üìä MONITORING & LOGGING (Optional)
# ================================================================
# Application monitoring and error tracking

LOG_LEVEL="info"                            # Log level: debug | info | warn | error
SENTRY_DSN=""                               # Sentry error tracking DSN (optional)
MONITORING_SERVICE_URL="http://localhost:6030"  # Orchestrator monitoring URL


# ================================================================
# üîÑ REDIS (Optional - For Caching & Queues)
# ================================================================
# Redis for caching, sessions, and job queues
# Optional - not currently required but useful for scaling

REDIS_URL="redis://localhost:6379"          # Redis connection URL
REDIS_PASSWORD=""                           # Redis password (if auth enabled)


# ================================================================
# üåç LOCALIZATION & MULTI-LANGUAGE
# ================================================================
# Multi-language support configuration

DEFAULT_LANGUAGE="en"                       # Default UI language
AVAILABLE_LANGUAGES="en,pl,ru,uk"           # Supported languages (comma-separated)


# ================================================================
# üöÄ AUTO-RESTORE SYSTEM (Production)
# ================================================================
# Automatic service restoration and health monitoring
# Used in production for zero-downtime deployments

SMART_RESTORE_SCRIPT="/root/beauty-platform/deployment/auto-restore/smart-restore-manager.sh"
SMART_RESTORE_WORKDIR="/root/beauty-platform"
AUTO_RESTORE_ENABLED="true"                 # Enable auto-restore in production


# ================================================================
# üî¢ SERVICE PORTS (For Reference)
# ================================================================
# Port assignments for all services (informational)
# These are hardcoded in service configs, listed here for reference

# PORT_LANDING="6000"        # Landing page (optional)
# PORT_CRM="6001"            # Salon CRM frontend
# PORT_ADMIN="6002"          # Admin panel frontend
# PORT_CLIENT="6003"         # Client portal frontend
# PORT_LANDING_ALT="6004"    # Alternative landing page
# PORT_GATEWAY="6020"        # API Gateway
# PORT_AUTH="6021"           # Auth service
# PORT_CRM_API="6022"        # CRM API service
# PORT_MCP="6025"            # MCP server
# PORT_IMAGES="6026"         # Images API
# PORT_BACKUP="6027"         # Backup service
# PORT_NOTIFICATION="6028"   # Notification service
# PORT_PAYMENT="6029"        # Payment service
# PORT_ORCHESTRATOR="6030"   # Service orchestrator


# ================================================================
# üìù NOTES & BEST PRACTICES
# ================================================================
#
# üîí Security:
#   - Never commit .env file to git (it's in .gitignore)
#   - Use different secrets for each environment
#   - Rotate secrets regularly (every 90 days)
#   - Use secret management tools in production (AWS Secrets Manager, HashiCorp Vault)
#
# üåç Multi-Environment:
#   - Development: Copy .env.example to .env
#   - Staging: Create .env.staging
#   - Production: Create .env.production
#
# üöÄ Production Checklist:
#   ‚úÖ Change all default passwords
#   ‚úÖ Generate strong random secrets (32+ characters)
#   ‚úÖ Use production API keys (not test keys)
#   ‚úÖ Configure production URLs (HTTPS only)
#   ‚úÖ Enable HTTPS for all services
#   ‚úÖ Setup proper CORS origins (specific domains, not wildcards)
#   ‚úÖ Enable Telegram notifications
#   ‚úÖ Configure backup SMS provider
#   ‚úÖ Setup Sentry or other monitoring
#   ‚úÖ Enable auto-restore system
#   ‚úÖ Use shorter JWT TTL (15m access, 7d refresh)
#   ‚úÖ Store ALL sensitive credentials in GitHub Secrets (see below)
#
# üîê GitHub Secrets Setup (PRODUCTION CRITICAL):
#   Set the following secrets using GitHub Actions:
#   gh secret set SMTP_USER -b "your_smtp_user"
#   gh secret set SMTP_PASS -b "your_smtp_password"
#   gh secret set GOOGLE_CLIENT_ID -b "your_google_client_id"
#   gh secret set GOOGLE_CLIENT_SECRET -b "your_google_client_secret"
#   gh secret set TWILIO_ACCOUNT_SID -b "your_twilio_account_sid"
#   gh secret set TWILIO_AUTH_TOKEN -b "your_twilio_auth_token"
#   gh secret set TWILIO_PHONE_NUMBER -b "your_twilio_phone_number"
#   gh secret set STRIPE_PUBLISHABLE_KEY -b "your_stripe_publishable_key"
#   gh secret set STRIPE_SECRET_KEY -b "your_stripe_secret_key"
#   gh secret set STRIPE_WEBHOOK_SECRET -b "your_stripe_webhook_secret"
#   gh secret set PAYPAL_CLIENT_ID -b "your_paypal_client_id"
#   gh secret set PAYPAL_CLIENT_SECRET -b "your_paypal_client_secret"
#   gh secret set MESSAGEBIRD_API_KEY -b "your_messagebird_api_key"
#   gh secret set TELEGRAM_BOT_TOKEN -b "your_telegram_bot_token"
#   gh secret set TELEGRAM_CHAT_ID -b "your_telegram_chat_id"
#   gh secret set DATABASE_PASSWORD -b "your_database_password"
#
# üîë Secret Generation Commands:
#   # JWT Secrets (32 bytes = 64 hex chars)
#   openssl rand -hex 32
#
#   # MFA Master Key (32 bytes = 64 hex chars)
#   openssl rand -hex 32
#
#   # Random password (20 chars)
#   openssl rand -base64 20
#
# üìö Documentation:
#   - Full setup guide: /docs/setup/ENVIRONMENT_SETUP.md
#   - Deployment guide: /docs/deployment/DEPLOYMENT_GUIDE.md
#   - Security guide: /docs/security/SECURITY_BEST_PRACTICES.md
#
# üÜò Support:
#   - GitHub Issues: https://github.com/DesignCorporation/Beauty-Platform/issues
#   - Documentation: Check /docs directory
#   - Team: Contact project maintainers
#
# ================================================================
# Last Updated: 2025-12-03 (PR #1: Secrets Management)
# Version: 1.1.0 - Security Hardened Edition
# ================================================================
# Changes in 1.1.0:
#   - All production secrets moved to GitHub Actions Secrets
#   - Added GitHub Secrets setup instructions
#   - Removed example secret values for security
#   - Added PayPal configuration section
#   - Updated SMTP, Google OAuth, Twilio, Stripe to use env vars
